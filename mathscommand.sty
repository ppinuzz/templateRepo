% MATHS COMMANDS
% system of equations with ONE LABEL ONLY
\newenvironment{sistema}{\left\{ \begin{aligned}}{\end{aligned} \right.}
% system of equations individually numbered
% (for \endalign see https://tex.stackexchange.com/questions/236664/)
\newenvironment{sistemaSub}{\align[left=\empheqlbrace]}{\endalign}				% requires EMPHEQ


% GENERAL NOTATION
\newcommand{\cost}{\text{const.}}				% x = const. in upright text
\renewcommand{\tilde}[1]{\widetilde{#1}}		% big tilde in place of small tilde (more visible)
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}	% absolute value -> \abs*{...} resizes automatically
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}	% norm  -> \norm*{...} resizes automatically
\newcommand{\ji}{\textup{i}}                    % imaginary unit in upright font


% compact finite difference operator:
% \fd{u}{t}{+}{n} = [D_t^+ u]^n = forward (+) finite difference of function u w.r.t. t evaluted at the n-th point
\newcommand{\fd}[4]{\big[ \mathcal{D}_{#2}^{#3} #1 \big]^{#4}}
\newcommand{\avg}[3]{\big[ \overline{#1}^{#2} \big]^{#3}}
\newcommand{\fdavg}[4]{\big[ \overline{\mathcal{D}}_{#2}^{#3} #1 \big]^{#4}}



% VECTOR AND MATRIX NOTATION
\newcommand{\vet}[1]{\boldsymbol{\mathbf{#1}}}		% bold vector (requires BM)
\newcommand{\mat}[1]{\boldsymbol{\mathbf{#1}}}		% bold matrix (requires BM)
% vertical bars in matrices (https://tex.stackexchange.com/questions/12910/)
\newcommand*{\vertbar}{\rule[-1ex]{0.5pt}{2.5ex}}
\newcommand{\scal}{\cdot}							% scalar product
\newcommand{\cross}{\times}							% vector product


% DIFFERENTIAL OPERATORS
\newcommand{\du}{\mathop{}\!\mathrm{d}}			% upright differential
% list of arguments:
% 	m = mandatory argument (function and variable of differentiation)
% 	o = optional argument (order of differentiation: default is 1)
% (in LaTeX, optional arguments come before mandatory ones)
% 	\der[3]{f}{x} 	d^3f/dx^3
%	\der{f}{x}		df/dx
\NewDocumentCommand{\der}{omm}{
	\IfNoValueTF{#1}{
		\dfrac{\du #2}{\du #3}
	}{
		\dfrac{\du^{#1} #2}{\du {#3}^{#1}}
	}
}
%\newcommand{\der}[2]{\dfrac{\du #1}{\du #2}}			% OLD: ordinary 1st derivative
\newcommand{\parz}[2]{\dfrac{\partial #1}{\partial #2}}	% 1st partial derivative
\newcommand{\dive}{\vet{\nabla} \scal}					% divergence 
\newcommand{\curl}{\vet{\nabla} \cross}					% curl
\newcommand{\grad}{\vet{\nabla}}						% gradient 
\newcommand{\lap}{\nabla^2}								% laplacian 
